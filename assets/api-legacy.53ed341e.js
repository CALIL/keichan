!function(){function e(e,a){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,a){if(!e)return;if("string"==typeof e)return r(e,a);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,a)}(e))||a&&e&&"number"==typeof e.length){i&&(e=i);var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,m=!0,d=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return m=e.done,e},e:function(e){d=!0,o=e},f:function(){try{m||null==i.return||i.return()}finally{if(d)throw o}}}}function r(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,i=new Array(r);a<r;a++)i[a]=e[a];return i}function a(e,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}var t=document.createElement("style");t.innerHTML='@charset "UTF-8";*{box-sizing:border-box;margin:0;padding:0}body,html{width:100%;height:100%;font-family:"Hiragino Kaku Gothic Pro","ヒラギノ角ゴ Pro W3","Noto Sans JP","ＭＳ Ｐゴシック","Helvetica Neue",Helvetica,Arial,sans-serif}#app{margin:0 auto}#app header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}#app header form input{width:300px;height:3rem;padding:.5rem 1rem;border:1px solid #cccCCCCC;border-top-left-radius:5px;border-bottom-left-radius:5px}#app header form button{height:3rem;padding:.3rem 1rem;border-top:1px solid #cccCCCCC;border-right:1px solid #cccCCCCC;border-bottom:1px solid #cccCCCCC;border-left:none;border-top-right-radius:5px;border-bottom-right-radius:5px;cursor:pointer}#app header form button:hover{border-color:#999}#app header .right{display:flex}#app header .right .count{font-size:2rem;font-weight:700;margin-right:1rem}#app header .right button{padding:0 1rem;border:1px solid #cccCCCCC;border-radius:5px;cursor:pointer}#app header .right button:hover{border:1px solid #999}#app .warning{border:1px solid #cccCCCCC;border-radius:10px;padding:1rem;margin-bottom:.5rem}#app .connected{border:1px solid #cccCCCCC;border-radius:10px;padding:1rem;margin-bottom:.5rem}#app .description{text-align:center;background-color:#eee;border:1px solid #cccCCCCC;border-radius:10px;padding:5rem}#app .description svg{display:block;width:75px;margin:0 auto}#app .Spreadsheet__table{width:100%}#app .books{border-top:1px solid #ccc}#app .books .book{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid #ccc}#app .books .book .bib{display:flex;align-items:center}#app .books .book .bib img{width:50px;margin-right:1rem}#app .books .book .bib .title{margin-right:1rem}#app .books .book .bib .isbn{font-size:.8rem}#app .books .book button{padding:0 .5rem;border:1px solid #ccc;border-radius:5px;cursor:pointer}#app .books .book button:hover{border:1px solid #999}@keyframes spinner{to{transform:rotate(360deg)}}@keyframes waiting{0%,100%,40%{background-size:32px}20%{background-size:40px}}.suggest{position:absolute;top:95px;z-index:100000;width:90%;background-color:#fff;box-shadow:0 2px 4px #ccc}.suggest .message{font-size:1rem;font-weight:600;color:#999;margin:0;background-color:#fff;padding:5px;border:1px solid #ccc;transition:opacity .6s}.suggest .results{border-bottom:1px solid #ccc;max-height:350px;overflow-y:scroll}.suggest .results .book{display:flex;justify-content:flex-start;align-items:flex-start;background-color:#fff;padding:0;border-top:1px solid #ccc;transition:opacity .6s;height:70px;overflow:hidden}.suggest .results .book:hover{background-color:#c6e5f2;border-bottom:1px solid #08a2e8}.suggest .results .book:hover{background-color:#c6e5f2}.suggest .results .book:hover>.next{color:#08a2e8}.suggest .results .book img{width:60px;margin-right:.5rem;background-color:#fff;background-image:url("https://calil.jp/public/img/no-image/noimage.png");background-size:100%}.suggest .results .book>div{padding:.5rem}.suggest .results .book>div .title{font-size:1rem;line-height:1.2em;font-weight:600;color:#444;text-decoration:none;max-height:2.4em;text-align:left;margin-bottom:.25rem}.suggest .results .book>div .author{font-size:.8rem;font-weight:400}.suggest .loading{top:-5px!important}.suggest .loading svg{display:none}.suggest .loading:before{content:"読み込み中";position:absolute;top:50%;left:50%;width:16px;height:16px;margin-top:-5px;margin-left:-10px}.suggest .loading:not(:required):before{content:"";border-radius:50%;border:2px solid rgba(0,0,0,.3);border-top-color:rgba(0,0,0,.6);animation:spinner .6s linear infinite;-webkit-animation:spinner .6s linear infinite}.hide_suggest .results{display:none}.speech{padding:1rem}.speech svg{width:1rem;height:1rem}#app,body,html{height:100%}#chat{height:100%}#chat header{background-color:#20b4ea;margin:0}#chat header h1{color:#fff;text-align:center;margin:1rem auto}#chat main{display:flex;height:100%}#chat main .left{flex:1;background-color:#ccc}#chat main .left .barcode{margin-bottom:1rem;background-color:#ccc;padding:1rem}#chat main .left .barcode.active{background-color:#106ba3}#chat main .left .barcode .tag{margin-bottom:.5rem}#chat main .left .barcode p{font-size:1.25rem;color:#fff}#chat main .right{flex:1;background-color:#ccc}#chat main .main{flex:3;background-color:#fff;height:100%;width:300px;padding:1rem}#chat main .main .card{position:relative;display:flex;justify-content:space-between;background-color:#999;margin-bottom:1rem}#chat main .main .card.active{background-color:#0e9960}#chat main .main .card.indent{margin-left:2rem}#chat main .main .card h3{color:#fff;margin:.5rem 0 0}#chat main .main .card .tag{margin-right:1rem}#chat main .main .card .thumbnail{position:absolute;top:0;right:100px;height:80px}#chat main .main .addMore{display:flex;margin-left:2rem}#chat main .main .addMore input{width:300px;margin-right:1rem}#app,body,html{height:100%}#suggests{height:100%}#suggests header{background-color:#20b4ea;margin:0}#suggests header h1{color:#fff;text-align:center;margin:1rem auto}#suggests main{display:flex;height:100%}#suggests main .left{flex:1;background-color:#ccc}#suggests main .left .barcode{margin-bottom:1rem;background-color:#ccc;padding:1rem}#suggests main .left .barcode.active{background-color:#106ba3}#suggests main .left .barcode .tag{margin-bottom:.5rem}#suggests main .left .barcode p{font-size:1.25rem;color:#fff}#suggests main .right{flex:1;background-color:#ccc}#suggests main .main{flex:3;background-color:#fff;height:100%;width:300px;padding:1rem}#suggests main .main h3{margin-bottom:1rem}#suggests main .main form{display:flex;align-items:center;margin-bottom:1rem}#suggests main .main form svg{height:1.5rem;margin-left:1rem}#suggests main .main .card{position:relative;display:flex;justify-content:space-between;background-color:#999;margin-bottom:1rem}#suggests main .main .card.active{background-color:#0e9960}#suggests main .main .card.indent{margin-left:2rem}#suggests main .main .card h3{color:#fff;margin:.5rem 0 0}#suggests main .main .card .tag{margin-right:1rem}#suggests main .main .card .thumbnail{position:absolute;top:0;right:100px;height:80px}#suggests main .main .addMore input{width:300px;margin-right:1rem;margin-bottom:.5rem}#suggests main .main .nextBook{margin-top:3rem}#suggests main .main .nextBook h2{margin-bottom:1rem}#suggests main .main .nextBook h2 span{display:inline-block;font-size:1rem;font-weight:400;margin-left:.5rem}#suggests main .main .nextBook .cards{display:grid;grid-template:1fr 1fr 1fr 1fr/1fr 1fr 1fr 1fr}#suggests main .main .nextBook .cards .card{cursor:pointer;display:inline-flex;align-items:center;margin:.5rem}#suggests main .main .nextBook .cards .card .card-header{display:flex;align-items:flex-start}#suggests main .main .nextBook .cards .card .card-header h3{font-size:.8rem;margin-bottom:.5rem}#suggests main .main .nextBook .cards .card .card-header .author{font-size:.7rem;color:#fff}#suggests main .main .nextBook .cards .card .card-header img{width:50px;margin-right:1rem}#suggests main .main .nextBook .cards .card .card-header .bp3-tag{margin-right:.5rem;margin-bottom:.5rem}@keyframes fadein-keyframes{0%{opacity:1}100%{opacity:0}}#app,body,html{height:100%}.bp3-overlay-content{position:absolute;top:calc(50vh - 1rem);left:calc(50vw - 200px);width:400px;display:flex;justify-content:center;align-items:center}#new{height:100%}#new header{background-color:#20b4ea;margin:0}#new header h1{color:#fff;text-align:center;margin:1rem auto}#new header h1 .mode{display:inline-block;font-size:.8rem;margin-left:.5rem}#new main{display:flex;height:100%}#new main .left{flex:1;background-color:#ccc}#new main .left .barcode{margin-bottom:1rem;background-color:#ccc;padding:1rem}#new main .left .barcode.active{background-color:#106ba3}#new main .left .barcode .tag{margin-bottom:.5rem}#new main .left .barcode p{font-size:1.25rem;color:#fff}#new main .right{flex:1;background-color:#ccc}#new main .main{flex:3;background-color:#fff;height:100%;width:300px;padding:1rem}#new main .main h3{margin-bottom:1rem}#new main .main form{display:flex;align-items:center;margin-bottom:1rem}#new main .main form svg{height:1.5rem;margin-left:1rem}#new main .main .card{position:relative;display:flex;justify-content:space-between;background-color:#999;margin-bottom:1rem}#new main .main .card.active{background-color:#0e9960}#new main .main .card.indent{margin-left:2rem}#new main .main .card h3{color:#fff;margin:.5rem 0 0}#new main .main .card .tag{margin-right:1rem}#new main .main .card .thumbnail{position:absolute;top:0;right:100px;height:80px}#new main .main .addMore input{width:300px;margin-right:1rem;margin-bottom:.5rem}#new main .main .nextBook{margin-top:3rem}#new main .main .nextBook h2{margin-bottom:1rem}#new main .main .nextBook h2 span{display:inline-block;font-size:1rem;font-weight:400;margin-left:.5rem}#new main .main .nextBook .cards{display:grid;grid-template:1fr 1fr 1fr 1fr/1fr 1fr 1fr 1fr}#new main .main .nextBook .cards .card{cursor:pointer;display:inline-flex;align-items:center;margin:.5rem}#new main .main .nextBook .cards .card .card-header{display:flex;align-items:flex-start}#new main .main .nextBook .cards .card .card-header h3{font-size:.8rem;margin-bottom:.5rem}#new main .main .nextBook .cards .card .card-header .author{font-size:.7rem;color:#fff}#new main .main .nextBook .cards .card .card-header img{width:50px;margin-right:1rem}#new main .main .nextBook .cards .card .card-header .bp3-tag{margin-right:.5rem;margin-bottom:.5rem}@keyframes fadein-keyframes{0%{opacity:1}100%{opacity:0}}#app,body,html{height:100%}.bp3-overlay-content{position:absolute;top:calc(50vh - 1rem);left:calc(50vw - 200px);width:400px;display:flex;justify-content:center;align-items:center}#debug{height:100%}#debug header{background-color:#20b4ea;margin:0}#debug header h1{color:#fff;text-align:center;margin:1rem auto}#debug header h1 .mode{display:inline-block;font-size:.8rem;margin-left:.5rem}#debug main{display:flex;height:100%}#debug main .left{flex:1;background-color:#ccc}#debug main .left .barcode{margin-bottom:1rem;background-color:#ccc;padding:1rem}#debug main .left .barcode.active{background-color:#106ba3}#debug main .left .barcode .tag{margin-bottom:.5rem}#debug main .left .barcode p{font-size:1.25rem;color:#fff}#debug main .debug{flex:1;background-color:#ccc;height:100%}#debug main .debug .logs{height:100%;color:#fff;background-color:#000;padding:1rem}#debug main .debug .logs div{margin-bottom:.5rem}#debug main .main{position:relative;flex:3;background-color:#fff;height:100%;padding:1rem}#debug main .main h3{margin-bottom:1rem}#debug main .main form{display:flex;align-items:center;margin-bottom:1rem}#debug main .main form svg{height:1.5rem;margin-left:1rem}#debug main .main .card{position:relative;display:flex;justify-content:space-between;align-items:center;background-color:#999;margin-bottom:1rem}#debug main .main .card.active{background-color:#0e9960}#debug main .main .card.indent{margin-left:2rem}#debug main .main .card>div{display:flex}#debug main .main .card>div .thumbnail{height:80px;margin-right:1rem}#debug main .main .card>div>div h3{color:#fff;margin:.5rem 0 0}#debug main .main .card>div>div .tag{margin-right:1rem}#debug main .main .addMore input{width:300px;margin-right:1rem;margin-bottom:.5rem}#debug main .main .nextBook{position:absolute;top:50vh;margin-top:3rem;width:98%;background-color:#fff}#debug main .main .nextBook h2{margin-bottom:1rem}#debug main .main .nextBook h2 span{display:inline-block;font-size:1rem;font-weight:400;margin-left:.5rem}#debug main .main .nextBook .cards{display:grid;grid-template:1fr 1fr 1fr 1fr/1fr 1fr 1fr 1fr}#debug main .main .nextBook .cards .card{cursor:pointer;display:inline-flex;align-items:center;margin:.5rem}#debug main .main .nextBook .cards .card .card-header{display:flex;align-items:flex-start}#debug main .main .nextBook .cards .card .card-header h3{font-size:.8rem;margin-bottom:.5rem}#debug main .main .nextBook .cards .card .card-header .author{font-size:.7rem;color:#fff}#debug main .main .nextBook .cards .card .card-header img{width:50px;margin-right:1rem}#debug main .main .nextBook .cards .card .card-header .bp3-tag{margin-right:.5rem;margin-bottom:.5rem}',document.head.appendChild(t),System.register(["./vendor-legacy.8a69da71.js"],(function(r){"use strict";var t,n,o;return{setters:[function(e){t=e.u,n=e.l,o=e.b}],execute:function(){r("n",(function(e){e=t.nfkc(e).toUpperCase().replace(/[^0-9X]/g,"");var r=n.parse(e);if(r){if(r.isIsbn10())return r.asIsbn10();if(r.isIsbn13())return r.asIsbn13().startsWith("978")?r.asIsbn10():r.asIsbn13()}else{var a=n.parse("978"+e);if(a&&a.isIsbn13())return a.asIsbn10()}return!1}));var m=["free","title","author","publisher","isbn","ndc","year_start","year_end","region"];function d(e){return o.get("https://unitrad.calil.jp/v1/"+e)}r("a",function(){function r(e,a){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),i(this,"callback",void 0),i(this,"killed",void 0),i(this,"data",void 0),this.callback=a,this.killed=!1,this.search(e)}var t,n,o;return t=r,(n=[{key:"kill",value:function(){this.killed=!0}},{key:"search",value:function(r){var a=this;this.killed||d("search").query(function(r){var a,i={},t=e(m);try{for(t.s();!(a=t.n()).done;){var n=a.value;r.hasOwnProperty(n)&&""!==r[n]&&(i[n]=r[n])}}catch(o){t.e(o)}finally{t.f()}return i}(r)).end((function(e,i){e?setTimeout((function(){return a.search(r)}),1e3):a.receive(i.body)}))}},{key:"polling",value:function(){var e=this;this.killed||d("polling").query({uuid:this.data.uuid,version:this.data.version,diff:1,timeout:10}).end((function(r,a){null===a.body?setTimeout((function(){return e.polling()}),100):e.receive(a.body)}))}},{key:"receive",value:function(r){var a=this;if(!this.killed){if(r.books_diff){for(var i in Array.prototype.push.apply(this.data.books,r.books_diff.insert),r)r.hasOwnProperty(i)&&"books_diff"!==i&&(this.data[i]=r[i]);var t,n=e(r.books_diff.update);try{for(n.s();!(t=n.n()).done;){var o=t.value;for(var m in o)if(o.hasOwnProperty(m)&&"_idx"!==m)if(!0===Array.isArray(o[m]))Array.prototype.push.apply(this.data.books[o._idx][m],o[m]);else if(o[m]instanceof Object)for(var d in o[m])o[m].hasOwnProperty(d)&&(this.data.books[o._idx][m][d]=o[m][d]);else this.data.books[o._idx][m]=o[m]}}catch(s){n.e(s)}finally{n.f()}}else this.data=r;this.callback(this.data),!0===r.running?(console.log("[Unitrad] continue..."),1===r.version&&0===this.data.books.length?setTimeout((function(){return a.polling()}),20):setTimeout((function(){return a.polling()}),500)):console.log("[Unitrad] complete.")}}}])&&a(t.prototype,n),o&&a(t,o),r}())}}}))}();
