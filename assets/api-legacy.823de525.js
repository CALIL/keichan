!function(){function e(e,r){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,r)}(e))||r&&e&&"number"==typeof e.length){o&&(e=o);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==o.return||o.return()}finally{if(c)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=document.createElement("style");i.innerHTML='@charset "UTF-8";*{box-sizing:border-box;margin:0;padding:0}body,html{width:100%;height:100%;font-family:"Hiragino Kaku Gothic Pro","ヒラギノ角ゴ Pro W3","Noto Sans JP","ＭＳ Ｐゴシック","Helvetica Neue",Helvetica,Arial,sans-serif}#app{margin:0 auto}#app header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}#app header form input{width:300px;height:3rem;padding:.5rem 1rem;border:1px solid #cccCCCCC;border-top-left-radius:5px;border-bottom-left-radius:5px}#app header form button{height:3rem;padding:.3rem 1rem;border-top:1px solid #cccCCCCC;border-right:1px solid #cccCCCCC;border-bottom:1px solid #cccCCCCC;border-left:none;border-top-right-radius:5px;border-bottom-right-radius:5px;cursor:pointer}#app header form button:hover{border-color:#999}#app header .right{display:flex}#app header .right .count{font-size:2rem;font-weight:700;margin-right:1rem}#app header .right button{padding:0 1rem;border:1px solid #cccCCCCC;border-radius:5px;cursor:pointer}#app header .right button:hover{border:1px solid #999}#app .warning{border:1px solid #cccCCCCC;border-radius:10px;padding:1rem;margin-bottom:.5rem}#app .connected{border:1px solid #cccCCCCC;border-radius:10px;padding:1rem;margin-bottom:.5rem}#app .description{text-align:center;background-color:#eee;border:1px solid #cccCCCCC;border-radius:10px;padding:5rem}#app .description svg{display:block;width:75px;margin:0 auto}#app .Spreadsheet__table{width:100%}#app .books{border-top:1px solid #ccc}#app .books .book{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid #ccc}#app .books .book .bib{display:flex;align-items:center}#app .books .book .bib img{width:50px;margin-right:1rem}#app .books .book .bib .title{margin-right:1rem}#app .books .book .bib .isbn{font-size:.8rem}#app .books .book button{padding:0 .5rem;border:1px solid #ccc;border-radius:5px;cursor:pointer}#app .books .book button:hover{border:1px solid #999}@keyframes spinner{to{transform:rotate(360deg)}}@keyframes waiting{0%,100%,40%{background-size:32px}20%{background-size:40px}}.suggest{position:absolute;top:95px;z-index:100000;width:90%;background-color:#fff;box-shadow:0 2px 4px #ccc}.suggest .message{font-size:1rem;font-weight:600;color:#999;margin:0;background-color:#fff;padding:5px;border:1px solid #ccc;transition:opacity .6s}.suggest .results{border-bottom:1px solid #ccc;max-height:350px;overflow-y:scroll}.suggest .results .book{display:flex;justify-content:flex-start;align-items:flex-start;background-color:#fff;padding:0;border-top:1px solid #ccc;transition:opacity .6s;height:70px;overflow:hidden}.suggest .results .book:hover{background-color:#c6e5f2;border-bottom:1px solid #08a2e8}.suggest .results .book:hover{background-color:#c6e5f2}.suggest .results .book:hover>.next{color:#08a2e8}.suggest .results .book img{width:60px;margin-right:.5rem;background-color:#fff;background-image:url("https://calil.jp/public/img/no-image/noimage.png");background-size:100%}.suggest .results .book>div{padding:.5rem}.suggest .results .book>div .title{font-size:1rem;line-height:1.2em;font-weight:600;color:#444;text-decoration:none;max-height:2.4em;text-align:left;margin-bottom:.25rem}.suggest .results .book>div .author{font-size:.8rem;font-weight:400}.suggest .loading{top:-5px!important}.suggest .loading svg{display:none}.suggest .loading:before{content:"読み込み中";position:absolute;top:50%;left:50%;width:16px;height:16px;margin-top:-5px;margin-left:-10px}.suggest .loading:not(:required):before{content:"";border-radius:50%;border:2px solid rgba(0,0,0,.3);border-top-color:rgba(0,0,0,.6);animation:spinner .6s linear infinite;-webkit-animation:spinner .6s linear infinite}.hide_suggest .results{display:none}.speech{padding:1rem}.speech svg{width:1rem;height:1rem}#app,body,html{height:100%}#chat{height:100%}#chat header{background-color:#20b4ea;margin:0}#chat header h1{color:#fff;text-align:center;margin:1rem auto}#chat main{display:flex;height:100%}#chat main .left{flex:1;background-color:#ccc}#chat main .left .barcode{margin-bottom:1rem;background-color:#ccc;padding:1rem}#chat main .left .barcode.active{background-color:#106ba3}#chat main .left .barcode .tag{margin-bottom:.5rem}#chat main .left .barcode p{font-size:1.25rem;color:#fff}#chat main .right{flex:1;background-color:#ccc}#chat main .main{flex:3;background-color:#fff;height:100%;width:300px;padding:1rem}#chat main .main .card{position:relative;display:flex;justify-content:space-between;background-color:#999;margin-bottom:1rem}#chat main .main .card.active{background-color:#0e9960}#chat main .main .card.indent{margin-left:2rem}#chat main .main .card h3{color:#fff;margin:.5rem 0 0}#chat main .main .card .tag{margin-right:1rem}#chat main .main .card .thumbnail{position:absolute;top:0;right:100px;height:80px}#chat main .main .addMore{display:flex;margin-left:2rem}#chat main .main .addMore input{width:300px;margin-right:1rem}#app,body,html{height:100%}#suggests{height:100%}#suggests header{background-color:#20b4ea;margin:0}#suggests header h1{color:#fff;text-align:center;margin:1rem auto}#suggests main{display:flex;height:100%}#suggests main .left{flex:1;background-color:#ccc}#suggests main .left .barcode{margin-bottom:1rem;background-color:#ccc;padding:1rem}#suggests main .left .barcode.active{background-color:#106ba3}#suggests main .left .barcode .tag{margin-bottom:.5rem}#suggests main .left .barcode p{font-size:1.25rem;color:#fff}#suggests main .right{flex:1;background-color:#ccc}#suggests main .main{flex:3;background-color:#fff;height:100%;width:300px;padding:1rem}#suggests main .main h3{margin-bottom:1rem}#suggests main .main form{display:flex;align-items:center;margin-bottom:1rem}#suggests main .main form svg{height:1.5rem;margin-left:1rem}#suggests main .main .card{position:relative;display:flex;justify-content:space-between;background-color:#999;margin-bottom:1rem}#suggests main .main .card.active{background-color:#0e9960}#suggests main .main .card.indent{margin-left:2rem}#suggests main .main .card h3{color:#fff;margin:.5rem 0 0}#suggests main .main .card .tag{margin-right:1rem}#suggests main .main .card .thumbnail{position:absolute;top:0;right:100px;height:80px}#suggests main .main .addMore input{width:300px;margin-right:1rem;margin-bottom:.5rem}#suggests main .main .nextBook{margin-top:3rem}#suggests main .main .nextBook h2{margin-bottom:1rem}#suggests main .main .nextBook h2 span{display:inline-block;font-size:1rem;font-weight:400;margin-left:.5rem}#suggests main .main .nextBook .card{cursor:pointer}#suggests main .main .nextBook .card h3{margin-bottom:.5rem}#suggests main .main .nextBook .card .author{color:#fff}',document.head.appendChild(i),System.register(["./vendor-legacy.454dee28.js"],(function(t){"use strict";var i,n,a;return{setters:[function(e){i=e.u,n=e.l,a=e.b}],execute:function(){t("n",(function(e){e=i.nfkc(e).toUpperCase().replace(/[^0-9X]/g,"");var t=n.parse(e);if(t){if(t.isIsbn10())return t.asIsbn10();if(t.isIsbn13())return t.asIsbn13().startsWith("978")?t.asIsbn10():t.asIsbn13()}else{var r=n.parse("978"+e);if(r&&r.isIsbn13())return r.asIsbn10()}return!1}));var s=["free","title","author","publisher","isbn","ndc","year_start","year_end","region"];function c(e){return a.get("https://unitrad.calil.jp/v1/"+e)}t("a",function(){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"callback",void 0),o(this,"killed",void 0),o(this,"data",void 0),this.callback=r,this.killed=!1,this.search(e)}var i,n,a;return i=t,(n=[{key:"kill",value:function(){this.killed=!0}},{key:"search",value:function(t){var r=this;this.killed||c("search").query(function(t){var r,o={},i=e(s);try{for(i.s();!(r=i.n()).done;){var n=r.value;t.hasOwnProperty(n)&&""!==t[n]&&(o[n]=t[n])}}catch(a){i.e(a)}finally{i.f()}return o}(t)).end((function(e,o){e?setTimeout((function(){return r.search(t)}),1e3):r.receive(o.body)}))}},{key:"polling",value:function(){var e=this;this.killed||c("polling").query({uuid:this.data.uuid,version:this.data.version,diff:1,timeout:10}).end((function(t,r){null===r.body?setTimeout((function(){return e.polling()}),100):e.receive(r.body)}))}},{key:"receive",value:function(t){var r=this;if(!this.killed){if(t.books_diff){for(var o in Array.prototype.push.apply(this.data.books,t.books_diff.insert),t)t.hasOwnProperty(o)&&"books_diff"!==o&&(this.data[o]=t[o]);var i,n=e(t.books_diff.update);try{for(n.s();!(i=n.n()).done;){var a=i.value;for(var s in a)if(a.hasOwnProperty(s)&&"_idx"!==s)if(!0===Array.isArray(a[s]))Array.prototype.push.apply(this.data.books[a._idx][s],a[s]);else if(a[s]instanceof Object)for(var c in a[s])a[s].hasOwnProperty(c)&&(this.data.books[a._idx][s][c]=a[s][c]);else this.data.books[a._idx][s]=a[s]}}catch(d){n.e(d)}finally{n.f()}}else this.data=t;this.callback(this.data),!0===t.running?(console.log("[Unitrad] continue..."),1===t.version&&0===this.data.books.length?setTimeout((function(){return r.polling()}),20):setTimeout((function(){return r.polling()}),500)):console.log("[Unitrad] complete.")}}}])&&r(i.prototype,n),a&&r(i,a),t}())}}}))}();
