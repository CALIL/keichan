!function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,o,r,n,i,s){try{var a=e[i](s),c=a.value}catch(u){return void o(u)}a.done?t(c):Promise.resolve(c).then(r,n)}function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=s(e);if(t){var n=s(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return i(this,o)}}function i(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):o}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=document.createElement("style");a.innerHTML='@charset "UTF-8";*{box-sizing:border-box;margin:0;padding:0}body,html{width:100%;height:100%;font-family:"Hiragino Kaku Gothic Pro","ヒラギノ角ゴ Pro W3","Noto Sans JP","ＭＳ Ｐゴシック","Helvetica Neue",Helvetica,Arial,sans-serif}#app{margin:0 auto}#app header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}#app header form input{width:300px;height:3rem;padding:.5rem 1rem;border:1px solid #cccCCCCC;border-top-left-radius:5px;border-bottom-left-radius:5px}#app header form button{height:3rem;padding:.3rem 1rem;border-top:1px solid #cccCCCCC;border-right:1px solid #cccCCCCC;border-bottom:1px solid #cccCCCCC;border-left:none;border-top-right-radius:5px;border-bottom-right-radius:5px;cursor:pointer}#app header form button:hover{border-color:#999}#app header .right{display:flex}#app header .right .count{font-size:2rem;font-weight:700;margin-right:1rem}#app header .right button{padding:0 1rem;border:1px solid #cccCCCCC;border-radius:5px;cursor:pointer}#app header .right button:hover{border:1px solid #999}#app .warning{border:1px solid #cccCCCCC;border-radius:10px;padding:1rem;margin-bottom:.5rem}#app .connected{border:1px solid #cccCCCCC;border-radius:10px;padding:1rem;margin-bottom:.5rem}#app .description{text-align:center;background-color:#eee;border:1px solid #cccCCCCC;border-radius:10px;padding:5rem}#app .description svg{display:block;width:75px;margin:0 auto}#app .Spreadsheet__table{width:100%}#app .books{border-top:1px solid #ccc}#app .books .book{display:flex;justify-content:space-between;align-items:center;padding:1rem 0;border-bottom:1px solid #ccc}#app .books .book .bib{display:flex;align-items:center}#app .books .book .bib img{width:50px;margin-right:1rem}#app .books .book .bib .title{margin-right:1rem}#app .books .book .bib .isbn{font-size:.8rem}#app .books .book button{padding:0 .5rem;border:1px solid #ccc;border-radius:5px;cursor:pointer}#app .books .book button:hover{border:1px solid #999}@keyframes spinner{to{transform:rotate(360deg)}}@keyframes waiting{0%,100%,40%{background-size:32px}20%{background-size:40px}}.suggest{position:absolute;top:95px;z-index:100000;width:90%;background-color:#fff;box-shadow:0 2px 4px #ccc}.suggest .message{font-size:1rem;font-weight:600;color:#999;margin:0;background-color:#fff;padding:5px;border:1px solid #ccc;transition:opacity .6s}.suggest .results{border-bottom:1px solid #ccc;max-height:350px;overflow-y:scroll}.suggest .results .book{display:flex;justify-content:flex-start;align-items:flex-start;background-color:#fff;padding:0;border-top:1px solid #ccc;transition:opacity .6s;height:70px;overflow:hidden}.suggest .results .book:hover{background-color:#c6e5f2;border-bottom:1px solid #08a2e8}.suggest .results .book:hover{background-color:#c6e5f2}.suggest .results .book:hover>.next{color:#08a2e8}.suggest .results .book img{width:60px;margin-right:.5rem;background-color:#fff;background-image:url("https://calil.jp/public/img/no-image/noimage.png");background-size:100%}.suggest .results .book>div{padding:.5rem}.suggest .results .book>div .title{font-size:1rem;line-height:1.2em;font-weight:600;color:#444;text-decoration:none;max-height:2.4em;text-align:left;margin-bottom:.25rem}.suggest .results .book>div .author{font-size:.8rem;font-weight:400}.suggest .loading{top:-5px!important}.suggest .loading svg{display:none}.suggest .loading:before{content:"読み込み中";position:absolute;top:50%;left:50%;width:16px;height:16px;margin-top:-5px;margin-left:-10px}.suggest .loading:not(:required):before{content:"";border-radius:50%;border:2px solid rgba(0,0,0,.3);border-top-color:rgba(0,0,0,.6);animation:spinner .6s linear infinite;-webkit-animation:spinner .6s linear infinite}.hide_suggest .results{display:none}.speech{padding:1rem}.speech svg{width:1rem;height:1rem}',document.head.appendChild(a),System.register(["./vendor-legacy.a6c72a0c.js"],(function(){"use strict";var e,i,s,a,c,u;return{setters:[function(t){e=t.u,i=t.l,s=t.r,a=t.R,c=t.S,u=t.a}],execute:function(){var p=function(s){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(m,s);var u,p,l,d,h,b=n(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=b.call(this,e)).state={invalidISBN:!1,books:[]},t.timer=null,t.str="",t.prevISBN=null,t.documentCode=null,t}return u=m,(p=[{key:"onKeyDown",value:function(e){var t=this;if("Spreadsheet__data-editor"!==e.target.parentNode.className){var o=e||window.event,r=o.keyCode||o.which||o.charCode;console.log(this.str),console.log(e.key),"Enter"===e.key||13===r?(this.checkStr(),this.timer&&clearTimeout(this.timer),this.str=""):(1===e.key.length?this.str+=e.key:"Shift"===e.key||(this.str=""),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){console.log("clear"),t.checkStr(),t.str=""}),300))}}},{key:"checkStr",value:function(){!function(t){t=e.nfkc(t).toUpperCase().replace(/[^0-9X]/g,"");var o=i.parse(t);if(o){if(o.isIsbn10())return o.asIsbn10();if(o.isIsbn13())return o.asIsbn13().startsWith("978")?o.asIsbn10():o.asIsbn13()}else{var r=i.parse("978"+t);if(r&&r.isIsbn13())return r.asIsbn10()}return!1}(this.str)?(this.setState({invalidISBN:!0}),this.str.match(/^[A-D][0-9]+[A-D]$/)?this.pushTempBook(this.str.replace(/[A-D]/g,"")):this.pushTempBook(this.str)):(this.setState({invalidISBN:!1}),this.addBook(this.str))}},{key:"componentDidMount",value:function(){window.document.addEventListener("keydown",this.onKeyDown.bind(this))}},{key:"addBook",value:(d=regeneratorRuntime.mark((function e(t){var o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://unitrad.calil.jp/v1/search?isbn=".concat(t,"&region=").concat("recipe")).then((function(e){return e.json()}));case 2:(o=e.sent).count>=1?(r=o.books[0],this.pushBook(r)):console.log("not found");case 4:case"end":return e.stop()}}),e,this)})),h=function(){var e=this,o=arguments;return new Promise((function(r,n){var i=d.apply(e,o);function s(e){t(i,r,n,s,a,"next",e)}function a(e){t(i,r,n,s,a,"throw",e)}s(void 0)}))},function(e){return h.apply(this,arguments)})},{key:"pushBook",value:function(e){var t=e.isbn,o=e.title,r=e.author,n=e.publisher,i=e.pubdate;this.prevISBN!==t&&(this.documentCode?(this.state.books.shift(),this.state.books.unshift([{value:this.documentCode},{value:t},{value:o},{value:r},{value:n},{value:i}]),this.documentCode=null):this.state.books.unshift([{value:t},{value:t},{value:o},{value:r},{value:n},{value:i}]),this.setState({}),this.prevISBN=t)}},{key:"pushTempBook",value:function(e){e.startsWith("192")||this.documentCode!==e&&(this.state.books.unshift([{value:e},{value:""},{value:""},{value:""},{value:""},{value:""}]),this.setState({}),this.documentCode=e)}},{key:"render",value:function(){return 0===this.state.books.length?a.createElement("div",{className:"description"},a.createElement("div",null,a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},a.createElement("path",{d:"M0 448V64h18v384H0zm26.857-.273V64H36v383.727h-9.143zm27.143 0V64h8.857v383.727H54zm44.857 0V64h8.857v383.727h-8.857zm36 0V64h17.714v383.727h-17.714zm44.857 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm35.715 0V64h18v383.727h-18zm44.857 0V64h18v383.727h-18zm35.999 0V64h18.001v383.727h-18.001zm36.001 0V64h18.001v383.727h-18.001zm26.857 0V64h18v383.727h-18zm45.143 0V64h26.857v383.727h-26.857zm35.714 0V64h9.143v383.727H476zm18 .273V64h18v384h-18z"})),"バーコードをスキャンしてください")):a.createElement(c,{data:this.state.books,columnLabels:["id","isbn","タイトル","著者","出版社","出版年"]})}}])&&o(u.prototype,p),l&&o(u,l),m}(s.exports.Component);u.render(a.createElement(p,null),document.getElementById("app"))}}}))}();
